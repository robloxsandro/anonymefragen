<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>Anonyme Fragen an Sandro</title>

<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap" rel="stylesheet">
<link id="favicon" rel="icon" href="" type="image/png">

<script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>

<style>
:root{
  --bg-start:#0b5a2f;
  --bg-end:#02140b;
  --white:#fff;
  --accent:#29d07a;
}
*{box-sizing:border-box}
html,body{
  margin:0;height:100%;
  font-family:Montserrat,system-ui;
  color:var(--white);
  background:
    radial-gradient(1200px 600px at 10% 10%, rgba(255,255,255,.02), transparent),
    linear-gradient(120deg,var(--bg-start),var(--bg-end));
  animation:bgMorph 22s linear infinite;
  overflow:hidden;
}
@keyframes bgMorph{
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}

.particles{position:fixed;inset:0;pointer-events:none;z-index:0}
.particle{position:absolute;background:rgba(255,255,255,.08);border-radius:50%;filter:blur(8px)}

.page{
  height:100dvh;
  display:flex;
  flex-direction:column;
  align-items:center;
  padding:22px;
  position:relative;
  z-index:2;
}

.header{
  width:100%;
  max-width:1100px;
  display:flex;
  align-items:center;
  gap:14px;
}
.profile{
  width:56px;height:56px;
  border-radius:10px;
  overflow:hidden;
}
.profile img{width:100%;height:100%;object-fit:cover}
.title{font-weight:900;font-size:20px}

.top-button{
  margin-left:auto;
  width:52px;height:52px;
  border-radius:10px;
  overflow:hidden;
}
.top-button img{width:100%;height:100%;object-fit:cover}

.canvas-wrap{
  flex:1;
  width:100%;
  max-width:1100px;
  display:flex;
  align-items:center;
  justify-content:center;
}
.canvas{
  width:100%;
  height:calc(100% - 120px);
  background:rgba(255,255,255,.04);
  border-radius:18px;
  backdrop-filter:blur(16px);
  padding:22px;
  display:flex;
  justify-content:center;
  align-items:center;
}

.form-card{
  width:100%;
  max-width:720px;
  background:rgba(255,255,255,.04);
  border-radius:14px;
  padding:18px;
  display:flex;
  flex-direction:column;
  gap:14px;
}

.form-title{font-weight:900;font-size:18px;margin-bottom:10px}
.hint{font-size:13px;opacity:.9;margin-bottom:12px}

textarea{
  width:100%;
  min-height:150px;
  border-radius:12px;
  border:none;
  padding:14px;
  font-size:16px;
  background:rgba(0,0,0,.2);
  color:#fff;
}

.controls{
  display:flex;
  justify-content:flex-end;
  margin-top:10px;
}

button{
  padding:12px 18px;
  border-radius:12px;
  border:none;
  font-weight:800;
  background:var(--accent);
  cursor:pointer;
}
button:disabled{
  background:rgba(255,255,255,.15);
  color:rgba(255,255,255,.6);
  cursor:not-allowed;
}

.toast{
  position:fixed;
  bottom:20px;
  left:50%;
  transform:translateX(-50%);
  background:rgba(0,0,0,.7);
  padding:12px 16px;
  border-radius:12px;
  font-weight:700;
  z-index:50;
}

.overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.85);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:60;
}
.overlay .card{
  background:#111;
  padding:22px;
  border-radius:14px;
  text-align:center;
}
</style>
</head>

<body>
<div class="particles" id="particles"></div>

<div class="page">
<header class="header">
  <div class="profile">
    <img src="https://bilderupload.org/image/1d3b03618-copy-0d0e0763-19ba-4b2f-9.jpg">
  </div>
  <div class="title">Anonyme Fragen an Sandro</div>
  <a class="top-button" href="https://robloxsandro.github.io">
    <img src="https://bilderupload.org/image/2d4011221-copy-822f22bb-b2d7-4475-a.jpg">
  </a>
</header>

<main class="canvas-wrap">
<section class="canvas">
<div class="form-card">
  <div class="form-title">Anonyme Nachricht</div>
  <div class="hint">Schreibe eine kurze Nachricht an Sandro. Nur WhatsApp-Kanal wird angeboten.</div>

  <a href="https://whatsapp.com/channel/0029VbBM5SEF6sn2jzyAYn1G"
     target="_blank"
     style="color:#4da3ff;font-size:13px;font-weight:700;text-decoration:none">
     â†’ Sandros WhatsApp Kanal besuchen
  </a>

  <textarea id="msg" placeholder="Deine Nachricht hier eingeben..."></textarea>

  <div id="captcha"></div>

  <div class="controls">
    <button id="send" style="display:none">Absenden</button>
  </div>
</div>
</section>
</main>
</div>

<script>
const WORKER_URL='https://anonymefragen.sandrorobloxcreations.workers.dev';
const SITE_KEY='0x4AAAAAACG_VpwEjC-i_bxF';
const WHATSAPP='https://whatsapp.com/channel/0029VbBM5SEF6sn2jzyAYn1G';

let token=null,sending=false,widgetId=null;

function toast(t){
  const d=document.createElement('div');
  d.className='toast';d.textContent=t;
  document.body.appendChild(d);
  setTimeout(()=>d.remove(),3000);
}

function renderCaptcha(){
  widgetId=turnstile.render('#captcha',{
    sitekey:SITE_KEY,
    theme:'dark',
    callback:t=>{
      token=t;
      document.getElementById('send').style.display='block';
    },
    'expired-callback':()=>{
      token=null;
      document.getElementById('send').style.display='none';
    }
  });
}

document.getElementById('send').onclick=async()=>{
  if(sending||!token)return;
  const msg=document.getElementById('msg').value.trim();
  if(!msg){toast('Nachricht leer');return;}

  sending=true;
  toast('Sende Nachrichtâ€¦');
  const btn=document.getElementById('send');
  btn.disabled=true;

  try{
    const r=await fetch(WORKER_URL,{
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body:JSON.stringify({message:msg,token})
    });
    if(!r.ok)throw 0;

    success();
  }catch{
    toast('Fehler beim Senden');
  }finally{
    sending=false;
    btn.disabled=false;
  }
};

function success(){
  const o=document.createElement('div');
  o.className='overlay';
  o.innerHTML=`
    <div class="card">
      <h2>Nachricht gesendet ðŸŽ‰</h2>
      <a href="${WHATSAPP}" target="_blank">
        <button>WhatsApp Kanal besuchen</button>
      </a><br><br>
      <button onclick="location.reload()">Noch eine senden</button>
    </div>`;
  document.body.appendChild(o);
}

renderCaptcha();
</script>
</body>
</html>
